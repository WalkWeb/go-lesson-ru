
# Изучаем язык Go #80 – Exit

В этом уроке мы рассмотрим функцию `os.Exit()` которая мгновенно завершает работу golang-программы.

Вначале напишем вывод сообщение с ключевым словом [defer](https://github.com/WalkWeb/go-lesson-ru/tree/master/lessons/46_defer).
При завершении программы через exit такие инструкции не будут выполнены. И мы пишем её только для того, чтобы наглядно
убедиться, что она не будет выполнена:

```
    defer fmt.Println("This code will not be executed")
```

А далее вызываем `os.Exit()` со статусом `3`:

```
    os.Exit(3)
```

Выполнив код получим:

```
$ go run exit.go 
exit status 3
```

Здесь нужно сделать небольшое отступление по поводу кодов завершения программ в Linux. Код `0` считается успешным –
он сообщает о том, что программа успешно отработала и завершилась.

Если заменить код на `os.Exit(0)` и выполнить программу еще раз мы увидим отсутствие какого-либо вывода. Это связано с
тем, что интерпретатор Go не считает нужным сообщать об успешном коде. А вот коды начиная с 1 считаются кодами ошибок.
На практике, обычно, используется только два кода: `0` – все хорошо, `1` – ошибка, и дополнительным текстом перед 
завершением программы сообщаются подробности ошибки.

В любом случае мы можем посмотреть какой был код завершения программы.

Вначале скомпилируем написанный ранее код:

```
$ go build exit.go 
```

Выполним скомпилированный бинарник:

```
$ ./exit
```

Никакого вывода мы не увидим. Потому что bash, в отличие от интерпретатора Go не считает, что нужно сообщать нам что-то
о коде завершения программы. Но его можно посмотреть вручную указав `echo $?`:

```
$ echo $?
3
```

Цифра 3 – это и есть тот код завершения программы, что мы указали в exit.
____

В этом уроке вы узнали:

- Как завершить программу на Go с помощью `os.Exit()`

Читайте также:

- Описание [кодов выхода](https://tldp.org/LDP/abs/html/exitcodes.html) в Linux
